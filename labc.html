<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <meta name="description">
    <link rel="stylesheet" href="css.css">
    <link rel="stylesheet" href="leaflet-1.7.1/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500&family=Poppins:wght@400;500&family=Roboto:wght@400;500&family=Lato:wght@400;500&family=Open+Sans:wght@400;500&display=swap" rel="stylesheet">
    <script src="leaflet-1.7.1/leaflet-src.js"></script>
    <script src="leaflet-1.7.1/leaflet-providers.js"></script>
    <script src="leaflet-1.7.1/leaflet-image.js"></script>
</head>

<body>
    <div class="container">

        <div id = "map1"> 
            <button id="getLocation">Moja lokalizacja</button>
            <button id="saveButton">Pobierz mapÄ™</button>
        </div>
       

        <div id="map2"></div>
        <div id = "map3"> </div>
        <div id = "map4"> </div>
    </div>

    <script>

let map1 = L.map('map1').setView([53.430127, 14.564802], 18);
        // L.tileLayer.provider('OpenStreetMap.DE').addTo(map);
        L.tileLayer.provider('Esri.WorldImagery').addTo(map1);
        

        document.getElementById("saveButton").addEventListener("click", function() {
            leafletImage(map1, function (err, canvas) {
                // here we have the canvas
                let rasterMap = document.getElementById("map2");
                let rasterContext = rasterMap.getContext("2d");

                rasterContext.drawImage(canvas, 0, 0, 300, 150);
            });
        });

        document.getElementById("getLocation").addEventListener("click", function(event) {
            if (! navigator.geolocation) {
                console.log("No geolocation.");
            }

            navigator.geolocation.getCurrentPosition(position => {
                console.log(position);
                let lat = position.coords.latitude;
                let lon = position.coords.longitude;

                map1.setView([lat, lon]);
            }, positionError => {
                console.error(positionError);
            });
        });
    </script>
</body>

